好同学们
接下来我们就开始第二章的学习docker的基本操作
`在这一章里我们会学习docker操作镜像
还有docker操作容器以及数据卷`
我们先来看第一部分docker操作镜像
不过呀我们在正式学习镜像操作命令之前
要先来看一下镜像的命名规范啊
那么进县的名称一般`由两部分组成`
第一部分我们称为repository
第二部分呢我们称为tag
`tag呢一般是指版本`
比方说我这儿有一个名为mysql:5.7的印象
其中冒号之前的mysql它就是一个repository
而冒号之后的5.7就是这个镜像的版本
我们称为tag
那因此呢
mysql:5.7和mysql:5.6是两个不同的镜像
大家千万不要把这个tag给搞错了啊
那有的人说了
如果我在写镜像的时候
我忘了写这个tag
那会出现什么情况呢
ok如果tag没有指定
`默认呢就是latest代表的是最新版本的镜像啊 `

好
那接下来我们就一起来看一看docker
镜像操作的命令啊
docker镜像的操作无非就是`c r u d`嘛
现在比如说这是我本地的docker
我呢要在这上面完成镜像的操作
比方说我要来`获取镜像`
我该怎么获取呢
一般有`两种做法`
第一种呢是从`本地获取`
你会需要一个名为docker file的文件
然后利用一个docker build命令把它构建成一个镜像
这部分后期会去专门学习啊
那除了从本地构建镜像以外
大多数情况下
我们会从docker registry的服务器里去`拉取镜像`
那拉取镜像会用一个命令叫docker pull
你可以从你们的私服里拉
也可以从公共的docker registry服务里拉
比如说dog hub
这两种就是获取镜像的方式了
那我已经获取到了镜像了
那我想知道我本地总共有哪些景象

我该怎么办呢
哎我们可以用一个名为`docker image`的命令去查看镜像
这里的image不要翻译成图片了
它其实就是镜像的意思好
那我现在知道我有这么多镜像了
我想删一两个多余的
我不用的
怎么办呢

我们会用一个命令叫docker r m i
这里的rmi是一个缩写
它的全称是remove images
也就是删除一个镜像的意思好
那现在呢我们已经学会了获取镜像
还有个查看镜像和删除镜像了
那我想把`镜像分享给别人`怎么办
两种方式
第一种把你的镜像`推送到镜像服务器`里去
比如说你们公司的私服
这种方式呢需要用一个命令叫`docker push推送`
还有一种办法呢相对简单一点
就是你把这个镜像啊
哎用`u盘拷给你的同事`
那要想call你
是不是得有一个这样的文件给他call啊
那你需要用一个`docker save命令
这个命令啊会把镜像保存成一个压缩包
那你同事就可以拿着u盘来拷这个压缩包了`
对吧
拷过去了以后
那他怎么把它变成镜像呢
唉再用一个`docker load的命令
就可以把这个压缩包再加载成一个本地镜像了`
唉这些呢就是docker中的镜像操作的常见命令了
虽然命令很多
但是我相信经过大家不断的练习
你肯定也无法记住每一个命令啊

别着急啊
我不是劝退
你记不住没关系
只要你学会什么了
查看帮助文档就行了
那有人说了
我怎么查看帮助文档呢
其实很简单
同学们
我给你演示一下啊
我们打开一个shell控制台

我们在这儿呢通过一个docker help
--help命令就能够查看到docker中的所有的命令了
看到没有
那比如说我现在想要详细的知道一下image
这个命令
它的一个作用
我还可以继续写`docker images --help`
那么他就会告诉你这条命令的一个作用了
什么作用啊
list images就是`列出所有的镜像`
而且还有各种各样的参数
每个参数是什么含义
这里都有说明
所以你看命令不需要记
只要会帮助文档就可以了
好我们回到ppt
好的

接下来我们就通过一个案例啊
来学习一下这些镜像操作的命令
这个案例是这样子的
让我们从dog hub拉取一个index镜像
并且查看
所以我们做的第一件事
就是去访问dog hub的网站
这里呢我已经给出了大家网址了
我们点进去好
然后呢在dota的官方网站上
我们可以去搜索engines
这个网站速度不是很快好
那我们可以看到搜索到的第一名就是angx
在他的后边有一个标识
official image
也就是官方镜像的意思啊
证明啊它是官方的一个正版镜像
我们呢就使用它点进去
点进来以后呢
我们往下看
在这里它的description就是描述
你可以看到它有很多很多不同的版本啊
比如1.19
还有1.18等等
如果你不想指定版本的情况下
它就是默认最新版`latest`
所以呢我们来看往上翻
最右侧
我们的浏览器给出了一个势力的一个命令啊
叫docker pool index
那么这个就是在拉扯index镜像了
那他没有指定版本
那因此默认呢就是最新版本来
我们呢就把这个命令给它复制一下
然后呢
我们回到shell控制台来操作一下docker pole index回车
然后我们就开始镜像的拉取了
但这个拉取的速度会比较慢
好我们可以看到镜像拉取完成了
他经过层层下载
终于把这个index镜像给拉下来了
这是第一步
dog poo去拉去
那我现在想查看本地镜像
刚才我们教给大家有一个命令叫docker images
后面呢可以跟参数
也可以不跟我们直接回车
可以看到这个镜像已经出现了啊
这个镜像呢大家看他的reporitory是nginx
然后它的tag是latest最新版
因为咱们没有指定版本吗
那后面呢还有一个image id
也就是镜像id
每一个镜像都会有一个自己的唯一id啊
然后后边created创建时间是four days ago
就是四天前
说明这个镜像是刚刚官方才创建出来的
非常新颖
还在热乎着
最后是这个镜像的大小可以看到只有100多兆
体积非常的小
那到这里呢我们就完成了第一个案例了
就是拉取镜像和查看镜像了
同学们
我们回到ppt啊
这是我们的第一个案例
第一步呢我们到dog hub上去搜索index
第二步呢通过docker poll呢去拉取
第三步呢我们通过docker images去查看镜像
别着急
到这儿我们的命令还没学完吧
我们还有一些命令
所以这还有一个案例啊
是让我们用docker save命令把nginx镜像导出到磁盘
而后再通过docker load给它加载回来
那docker save我们讲会把一个镜像变成一个压缩包
那他该怎么去用呢
这里并没有告诉我们
而是让我们自己用help命令去查看
所以我们来回到shell控制台
我们在这个地方通过clear清空一下控制台啊
然后docker save杠杠help来去查看一下帮助文档
dark save
他说了保存一个或多个镜像到一个什么呢
tap文件当中也就是个压缩文件当中好
那怎么去做呢
上边给出的就是他的命令的事例了
docker save这个地方的option是选项
比如说这里杠o就是output输出的意思
输出到哪里呢
可以跟进一个文件
另一个文件
也就是说我们把这个镜像给它
输出到一个指定的文件当中
好后边image就是你要输出的是哪个镜像呢
你要把哪个镜像导出去呢
所以你要把镜像的名字告诉我
ok那下边呢我们就来去尝试着来写一写这个啊
我们先通过docker images来查看一下
可以看到现在只有一个ninx latest镜像
对不对
那下面呢我们按照这个命令
第一步docker save好
跟上option
参数参数是杠o杠o后面要跟上什么呢
right to a fail
就是写一个文件
那么你要保存到哪个文件里去
比如说我就保存到ngx点他这样一个文件里去
这个文件不存在
将来它会自动创建
再往后option结束了
就轮到image
就是你的镜像名称
那我的镜像名称由两部分组成
先是repository index
再是它的tag
tag是latest
这样呢就完成了这个镜像的导出命令了
好大家注意看这几部分啊
doc save这个跟上面dog save一致
option
那么这边呢就是杠o这一块啊
对应到我们上面的option
最后呢我们还有一个image
也就是镜像
也就是我们最后这一部分image 3部分组成好
我们来去执行一下
回车好
我们再来看一下
可以看到本地是不是出现了一个index的td
这样一个文件呀
说明我们的导出成功了
那接下来我们还要演示导入我们怎么做呢
我先把本地的这个镜像给它删掉
就这个index latest怎么删
docker rmi ri就是删除一个镜像
删除一条remove images
好删除哪个镜像呢
你可以指定镜像名称
也可以指定镜像的i d指定镜像名称
我就要写angx latest
这样呢就能删除了走
可以看到deleted是不是删掉了
我们再次通过docker images来查看
发现没有任何镜像了
那接下来我们就通过load
来加载这个nginx的tar文件
那load命令又该怎么用呢
我们再次通过help命令来查看
可以看到这里
dark load后面直接加option就可以了
option可以加杠i杠i就是输入
也就是说你要读哪一个文件呢
后面跟上一个要读取的这个tar文件就行了
那么我们的ta文件是叫index t
所以我参考这个命令其实就很好写了呀
docker load load后面是不是加option呢
那option这里我们选杠i到a的
后面跟上要读的那个tar文件
我们是不是index.t呀
所以我直接写index t好
那么这个命令其实就结束了
杠q呢是快就是安静的
它不会打印日志
这里我们就不去加杠q了
我们直接回车
可以看到它会打印一些日志加载的过程
如果你加了杠q
这些信息都看不到了啊
这个时候呢我们再次通过docker images来查看运行日志
可以看到镜像成功加载回来了
这就是我们刚刚这个案例所练习的几个命令了
分别是docker
save docker
are my docker load
有同学说
你这一顿操作这么多命令
我怎么记得住呀
同学们
你看我在操作每个命令时都是查看帮助文档
带着你写的吧
所以我想教会大家的不是命令
而是这个命令怎么样去学习的
自己去用
大家只要学会了帮助文档
然后呢多练习
你一定能够掌握好
我们回到ppt
docker镜像操作有这么多
大家肯定也记不住
对不对
你也不用去记
只要会帮助将来一个一个的看着去用就行了
但是你要知道大概的作用啊
比如说docker images是干什么呀
是不是查看啊
docker army呢是不是删除啊
remove images
那dog poo呢是不是拉取一个镜像啊
我们刚刚用到过吧
这个push暂时还没用过
dog save呢是不是保存一个镜像啊
保存成一个ta文件吧
dock load呢不是读取一个tp文件变成镜像啊
好的那这些命令我们就说完了
这节课内容就到这里
